<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- Mobile friendly -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />

    <!-- ===== SEO Core ===== -->
    <title>
      Free Video Downloader — YouTube, Instagram, Pinterest (4K MP4/MP3)
    </title>
    <meta
      name="description"
      content="Fast, free video downloader for YouTube, Instagram & Pinterest. Save 4K MP4, Reels & Pins or extract MP3 audio. No signup."
    />
    <meta
      name="keywords"
      content="video downloader, youtube to mp4, instagram reels downloader, pinterest video downloader, 4k downloader, youtube to mp3, save reels, free"
    />
    <link rel="canonical" href="https://yt.ankitsoni.in/" />
    <meta
      name="robots"
      content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1"
    />
    <meta name="theme-color" content="#111827" />

    <!-- Hreflang (expand when you add locales) -->
    <link
      rel="alternate"
      hreflang="x-default"
      href="https://yt.ankitsoni.in/"
    />
    <link rel="alternate" hreflang="en" href="https://yt.ankitsoni.in/" />

    <!-- ===== Social (Open Graph / Twitter) ===== -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://yt.ankitsoni.in/" />
    <meta
      property="og:title"
      content="Free Video Downloader — YouTube, Instagram, Pinterest (4K MP4/MP3)"
    />
    <meta
      property="og:description"
      content="Download 4K MP4, Reels & Pins or extract MP3. 100% free. No signup."
    />
    <meta
      property="og:image"
      content="https://yt.ankitsoni.in/static/og-cover.jpg"
    />
    <meta property="og:site_name" content="Ankit Soni Tools" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Free Video Downloader — YouTube, Instagram, Pinterest (4K MP4/MP3)"
    />
    <meta
      name="twitter:description"
      content="Fast, free, no signup. Save 4K MP4/MP3 from top platforms."
    />
    <meta
      name="twitter:image"
      content="https://yt.ankitsoni.in/static/og-cover.jpg"
    />

    <!-- ===== Icons / PWA (swap to your actual files if you have them) ===== -->
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/static/icons/favicon-32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/static/icons/favicon-16.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/static/icons/apple-touch-icon.png"
    />
    <link rel="manifest" href="/manifest.webmanifest" />

    <!-- ===== Performance hints ===== -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="dns-prefetch" href="//fonts.googleapis.com" />
    <link rel="dns-prefetch" href="//fonts.gstatic.com" />
    <link
      rel="preload"
      as="image"
      href="/static/og-cover.jpg"
      imagesrcset="/static/og-cover.jpg 1200w"
    />

    <!-- Tailwind CSS & Google Fonts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter+Tight:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- ===== Minor UI + a11y styles (non-invasive) ===== -->
    <style>
      body {
        font-family: "Inter Tight", system-ui, -apple-system, Segoe UI, Roboto,
          Ubuntu, Arial, sans-serif;
        background-color: #f8f9fa;
        scroll-behavior: smooth;
      }
      .btn-primary {
        background-color: #ff7700;
        transition: background-color 0.3s ease;
      }
      .btn-primary:hover {
        background-color: #e66a00;
      }
      .progress-bar-inner {
        background-color: #ff7700;
        transition: width 0.3s ease-in-out;
      }
      .gradient-text {
        background: linear-gradient(90deg, #ff7700, #ff5000);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }
      .loader {
        width: 24px;
        height: 24px;
        border: 3px solid white;
        border-bottom-color: transparent;
        border-radius: 50%;
        display: inline-block;
        box-sizing: border-box;
        animation: rotation 1s linear infinite;
      }
      @keyframes rotation {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
      .fade-in {
        animation: fadeIn 0.5s ease-in-out;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .tab {
        cursor: pointer;
        padding: 0.5rem 1rem;
        border-bottom: 3px solid transparent;
      }
      .tab.active {
        border-color: #ff7700;
        color: #ff7700;
        font-weight: 600;
      }
      /* Breadcrumbs */
      .breadcrumbs {
        font-size: 14px;
        color: #6b7280;
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
      }
      .breadcrumbs a {
        color: inherit;
        text-decoration: none;
      }
      .breadcrumbs a:hover {
        text-decoration: underline;
      }
      /* Hide-only visually for a11y labels */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        border: 0;
        white-space: nowrap;
      }
    </style>

    <!-- ===== JSON-LD: WebApplication ===== -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Free Video Downloader",
        "url": "https://yt.ankitsoni.in/",
        "applicationCategory": "Multimedia",
        "operatingSystem": "Web",
        "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
        "creator": {
          "@type": "Organization",
          "name": "Ankit Soni",
          "url": "https://ankitsoni.in"
        },
        "featureList": [
          "YouTube to MP4/MP3",
          "Instagram Reels & Story saver",
          "Pinterest video downloader",
          "4K video support"
        ]
      }
    </script>

    <!-- ===== JSON-LD: WebSite + SearchAction ===== -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Ankit Soni Tools",
        "url": "https://yt.ankitsoni.in/",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://yt.ankitsoni.in/?q={query}",
          "query-input": "required name=query"
        }
      }
    </script>

    <!-- ===== JSON-LD: BreadcrumbList ===== -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": "https://ankitsoni.in/"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "Tools",
            "item": "https://ankitsoni.in/tools"
          },
          {
            "@type": "ListItem",
            "position": 3,
            "name": "Free Video Downloader",
            "item": "https://yt.ankitsoni.in/"
          }
        ]
      }
    </script>

    <!-- ===== JSON-LD: FAQPage (syncs with on-page FAQ) ===== -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "Is the downloader free?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Yes, it’s 100% free with no registration."
            }
          },
          {
            "@type": "Question",
            "name": "Do you support 4K and MP3?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Yes, you can save videos up to 4K MP4 or extract high-quality MP3 when available."
            }
          },
          {
            "@type": "Question",
            "name": "Which sites are supported?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "YouTube, Instagram, and Pinterest are supported. More platforms may be added over time."
            }
          },
          {
            "@type": "Question",
            "name": "Is it legal to download videos?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Download only content you own or have permission to use. Respect each platform’s Terms."
            }
          }
        ]
      }
    </script>

    <!-- ===== JSON-LD: HowTo (matches your “How It Works”) ===== -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "HowTo",
        "name": "How to download videos as MP4 or MP3",
        "totalTime": "PT1M",
        "step": [
          {
            "@type": "HowToStep",
            "name": "Copy link",
            "text": "Copy the video URL from YouTube, Instagram or Pinterest."
          },
          {
            "@type": "HowToStep",
            "name": "Paste link",
            "text": "Paste the URL into the input box on this page."
          },
          {
            "@type": "HowToStep",
            "name": "Choose format & download",
            "text": "Select MP4 or MP3 and press Download."
          }
        ]
      }
    </script>
  </head>

  <body class="text-gray-800 antialiased">
    <header class="bg-white shadow-sm">
      <nav
        class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center"
        aria-label="Primary"
      >
        <h1 class="text-2xl font-bold gradient-text">MediaDownloader</h1>
        <a
          href="#features"
          class="text-gray-600 hover:text-[#ff7700] transition"
          >Features</a
        >
      </nav>
    </header>

    <!-- Breadcrumbs -->
    <nav
      class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-3"
      aria-label="Breadcrumb"
    >
      <div class="breadcrumbs">
        <a href="https://ankitsoni.in/">Home</a> ›
        <a href="https://ankitsoni.in/tools">Tools</a> ›
        <span aria-current="page">Free Video Downloader</span>
      </div>
    </nav>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 sm:py-16">
      <section class="text-center">
        <h2
          class="text-4xl sm:text-6xl font-extrabold text-gray-900 leading-tight"
        >
          Your All-in-One <span class="gradient-text">Media Downloader</span>
        </h2>
        <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">
          Paste a link from YouTube, Instagram, or Pinterest to download videos,
          Reels, and Pins in the highest quality—for free.
        </p>

        <div
          class="bg-white rounded-xl shadow-2xl p-4 sm:p-8 max-w-4xl w-full mx-auto mt-10"
        >
          <div class="border-b border-gray-200 mb-6">
            <nav
              class="-mb-px flex space-x-1 sm:space-x-4 justify-center"
              id="downloader-tabs"
              aria-label="Platforms"
            >
              <button class="tab active" data-platform="youtube" type="button">
                YouTube
              </button>
              <button class="tab" data-platform="instagram" type="button">
                Instagram
              </button>
              <button class="tab" data-platform="pinterest" type="button">
                Pinterest
              </button>
            </nav>
          </div>

          <!-- Accessible label for URL field (keeps same ID for JS) -->
          <label for="video-url" class="sr-only">Paste video URL</label>
          <form id="url-form" class="mb-4" aria-label="Downloader form">
            <div class="relative">
              <input
                type="text"
                id="video-url"
                class="w-full pl-5 pr-40 sm:pr-48 py-4 text-lg border-2 border-gray-300 rounded-full focus:ring-2 focus:ring-[#ff9933] focus:border-[#ff9933] transition"
                placeholder="Paste YouTube link here..."
                inputmode="url"
                autocomplete="off"
              />
              <button
                type="submit"
                id="submit-btn"
                class="absolute inset-y-0 right-0 flex items-center justify-center px-4 sm:px-6 m-2 text-white font-semibold rounded-full btn-primary text-base"
              >
                <span id="btn-text">Get Info</span>
                <div
                  id="btn-loader"
                  class="loader hidden"
                  aria-hidden="true"
                ></div>
              </button>
            </div>
          </form>

          <div
            id="error-container"
            class="hidden bg-red-100 border-l-4 border-red-500 text-red-800 p-4 my-4 rounded-lg"
            role="alert"
            aria-live="polite"
          >
            <p id="error-message"></p>
          </div>

          <div
            id="video-details"
            class="hidden mt-6 border-t-2 border-gray-100 pt-6 fade-in"
          ></div>
        </div>
      </section>

      <!-- How It Works -->
      <section id="how-it-works" class="py-20 sm:py-28">
        <div class="max-w-5xl mx-auto text-center">
          <h2 class="text-3xl font-bold text-gray-900">
            How It Works in 3 Simple Steps
          </h2>
          <p class="mt-4 text-lg text-gray-600">
            Downloading your favorite content has never been easier.
          </p>
        </div>
        <div class="mt-12 grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
          <div class="bg-white p-8 rounded-xl shadow-lg">
            <div class="text-5xl font-extrabold gradient-text">1</div>
            <h3 class="mt-4 text-xl font-bold">Copy & Paste URL</h3>
            <p class="mt-2 text-gray-600">
              Copy the content URL and paste it into the field above.
            </p>
          </div>
          <div class="bg-white p-8 rounded-xl shadow-lg">
            <div class="text-5xl font-extrabold gradient-text">2</div>
            <h3 class="mt-4 text-xl font-bold">Choose Format</h3>
            <p class="mt-2 text-gray-600">
              Select full video (MP4) or audio only (MP3).
            </p>
          </div>
          <div class="bg-white p-8 rounded-xl shadow-lg">
            <div class="text-5xl font-extrabold gradient-text">3</div>
            <h3 class="mt-4 text-xl font-bold">Download</h3>
            <p class="mt-2 text-gray-600">
              Click download and let our servers process it securely.
            </p>
          </div>
        </div>
      </section>

      <!-- Features -->
      <section
        id="features"
        class="py-20 sm:py-28 bg-white rounded-xl shadow-lg"
      >
        <div class="max-w-5xl mx-auto text-center px-4">
          <h2 class="text-3xl font-bold text-gray-900">
            Why Choose Our Downloader?
          </h2>
          <p class="mt-4 text-lg text-gray-600">
            Fast, simple, secure—no signup required.
          </p>
        </div>
        <div class="mt-12 grid grid-cols-1 md:grid-cols-3 gap-8 px-4">
          <div class="bg-gray-50 p-8 rounded-xl">
            <h3 class="mt-1 text-xl font-bold">4K MP4</h3>
            <p class="mt-2 text-gray-600">
              Save videos in up to 4K when the source allows.
            </p>
          </div>
          <div class="bg-gray-50 p-8 rounded-xl">
            <h3 class="mt-1 text-xl font-bold">MP3 Extract</h3>
            <p class="mt-2 text-gray-600">
              Grab clean audio for music, podcasts, and lectures.
            </p>
          </div>
          <div class="bg-gray-50 p-8 rounded-xl">
            <h3 class="mt-1 text-xl font-bold">Free & Fast</h3>
            <p class="mt-2 text-gray-600">
              Zero cost, optimized processing, instant results.
            </p>
          </div>
        </div>
      </section>

      <!-- FAQ -->
      <section class="py-20">
        <div class="max-w-4xl mx-auto px-4">
          <h2 class="text-3xl font-bold text-center text-gray-900">
            Frequently Asked Questions
          </h2>
          <div class="mt-8 space-y-4">
            <div>
              <h3 class="font-semibold text-lg">
                Is this video downloader really free?
              </h3>
              <p class="text-gray-600 mt-1">
                Yes—completely free to use without registration.
              </p>
            </div>
            <div class="border-t border-gray-200 pt-4">
              <h3 class="font-semibold text-lg">
                What platforms are supported?
              </h3>
              <p class="text-gray-600 mt-1">
                YouTube, Instagram, and Pinterest.
              </p>
            </div>
            <div class="border-t border-gray-200 pt-4">
              <h3 class="font-semibold text-lg">
                Can I download private content?
              </h3>
              <p class="text-gray-600 mt-1">
                No—only publicly available content is supported.
              </p>
            </div>
            <div class="border-t border-gray-200 pt-4">
              <h3 class="font-semibold text-lg">
                Is it safe to use this website?
              </h3>
              <p class="text-gray-600 mt-1">
                Yes. We don’t store your data or history; processing is
                automated.
              </p>
            </div>
          </div>
          <p class="text-gray-500 text-sm mt-6">
            Disclaimer: Use this tool only for content you own or have
            permission to download. Respect each platform’s Terms and local
            laws.
          </p>
        </div>
      </section>
    </main>

    <!-- Footer with helpful internal links for SEO -->
    <footer class="text-center py-8 border-t">
      <p class="text-gray-600">
        &copy; <span id="year"></span> Ankit Soni. All Rights Reserved.
      </p>
      <p class="text-gray-500 text-sm mt-1">
        For help &amp; support:
        <a
          href="mailto:hello@ankitsoni.in"
          class="text-[#ff7700] hover:underline"
          >hello@ankitsoni.in</a
        >
      </p>

      <div
        class="max-w-5xl mx-auto mt-6 grid grid-cols-1 sm:grid-cols-3 gap-4 px-4 text-left"
      >
        <div>
          <h3 class="font-semibold">Popular</h3>
          <ul class="text-sm text-gray-600 list-disc ml-5">
            <li><a href="/?q=youtube" rel="nofollow">YouTube to MP4</a></li>
            <li>
              <a href="/?q=instagram" rel="nofollow">Instagram Reels Saver</a>
            </li>
            <li>
              <a href="/?q=pinterest" rel="nofollow"
                >Pinterest Video Downloader</a
              >
            </li>
          </ul>
        </div>
        <div>
          <h3 class="font-semibold">Guides</h3>
          <ul class="text-sm text-gray-600 list-disc ml-5">
            <li><a href="#how-it-works">How to Download</a></li>
            <li><a href="#features">Top Features</a></li>
          </ul>
        </div>
        <div>
          <h3 class="font-semibold">More</h3>
          <ul class="text-sm text-gray-600 list-disc ml-5">
            <li>
              <a
                href="https://ankitsoni.in/tools"
                target="_blank"
                rel="noopener"
                >More Free Tools</a
              >
            </li>
            <li>
              <a
                href="https://ankitsoni.in/contact"
                target="_blank"
                rel="noopener"
                >Contact</a
              >
            </li>
          </ul>
        </div>
      </div>
    </footer>

    <!-- ===== Your existing JS (unchanged functionality) ===== -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("url-form");
        const urlInput = document.getElementById("video-url");
        const submitBtn = document.getElementById("submit-btn");
        const btnText = document.getElementById("btn-text");
        const btnLoader = document.getElementById("btn-loader");
        const errorContainer = document.getElementById("error-container");
        const errorMessage = document.getElementById("error-message");
        const videoDetailsContainer = document.getElementById("video-details");
        const tabs = document.querySelectorAll(".tab");

        document.getElementById("year").textContent = new Date().getFullYear();

        tabs.forEach((tab) => {
          tab.addEventListener("click", () => {
            tabs.forEach((t) => t.classList.remove("active"));
            tab.classList.add("active");
            const platform = tab.dataset.platform;
            urlInput.placeholder = `Paste ${
              platform.charAt(0).toUpperCase() + platform.slice(1)
            } link here...`;
            urlInput.value = "";
            clearInfo();
          });
        });

        form.addEventListener("submit", async (e) => {
          e.preventDefault();
          const url = urlInput.value.trim();
          if (!url) {
            displayError("Please paste a URL first.");
            return;
          }
          setLoading(true);
          clearInfo();
          try {
            const response = await fetch("/get-video-info", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ url }),
            });
            const data = await response.json();
            if (!response.ok)
              throw new Error(data.error || "Failed to fetch information.");
            displayVideoInfo(data);
          } catch (error) {
            displayError(error.message);
          } finally {
            setLoading(false);
          }
        });

        function setLoading(isLoading) {
          submitBtn.disabled = isLoading;
          btnText.classList.toggle("hidden", isLoading);
          btnLoader.classList.toggle("hidden", !isLoading);
        }
        function displayError(msg) {
          errorMessage.textContent = msg;
          errorContainer.classList.remove("hidden");
        }
        function clearInfo() {
          videoDetailsContainer.innerHTML = "";
          videoDetailsContainer.classList.add("hidden");
          errorContainer.classList.add("hidden");
        }
        function formatDuration(seconds) {
          if (!seconds) return "N/A";
          const totalSeconds = Math.round(seconds);
          const hrs = Math.floor(totalSeconds / 3600),
            mins = Math.floor((totalSeconds % 3600) / 60),
            secs = totalSeconds % 60;
          const pad = (num) => num.toString().padStart(2, "0");
          return hrs > 0
            ? `${pad(hrs)}:${pad(mins)}:${pad(secs)}`
            : `${pad(mins)}:${pad(secs)}`;
        }
        function formatViews(views) {
          return views === null || views === undefined
            ? "N/A"
            : views.toLocaleString();
        }

        function displayVideoInfo(data) {
          let viewsOrLikesLabel, downloadButtonText;
          switch (data.type) {
            case "youtube":
              viewsOrLikesLabel = "Views";
              downloadButtonText = "Video";
              break;
            case "instagram":
              viewsOrLikesLabel = "Likes";
              downloadButtonText = "Reel";
              break;
            case "pinterest":
              viewsOrLikesLabel = "Repins";
              downloadButtonText = "Pin";
              break;
            default:
              viewsOrLikesLabel = "Views";
              downloadButtonText = "Video";
          }

          const htmlContent = `
            <div class="flex flex-col md:flex-row gap-6">
              <img src="${
                data.thumbnail_url
              }" alt="Thumbnail" class="w-full md:w-1/3 h-auto rounded-lg shadow-lg object-cover" loading="lazy" decoding="async">
              <div class="flex-grow text-left">
                <h3 class="text-xl md:text-2xl font-bold text-gray-800 leading-tight">${
                  data.title
                }</h3>
                <p class="text-gray-600 mt-1 text-base md:text-lg">by ${
                  data.author
                }</p>
                <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 mt-4 text-gray-600 text-sm md:text-base">
                  <div class="flex items-center gap-2"><span>${viewsOrLikesLabel}: ${formatViews(
            data.views
          )}</span></div>
                  <div class="flex items-center gap-2"><span>${formatDuration(
                    data.duration
                  )}</span></div>
                </div>
                <div id="download-section" class="mt-6">
                  <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                    <button onclick="startDownload('${
                      data.url
                    }', 'video')" class="w-full bg-green-600 text-white font-bold py-3 px-5 rounded-lg hover:bg-green-700 transition flex items-center justify-center gap-2 text-md">Download ${downloadButtonText}</button>
                    <button onclick="startDownload('${
                      data.url
                    }', 'audio')" class="w-full bg-blue-600 text-white font-bold py-3 px-5 rounded-lg hover:bg-blue-700 transition flex items-center justify-center gap-2 text-md">Download Audio</button>
                  </div>
                </div>
                <div id="progress-section" class="hidden mt-6 text-left" aria-live="polite">
                  <div class="w-full bg-gray-200 rounded-full h-2.5 my-2">
                    <div id="progress-bar" class="bg-[#ff7700] h-2.5 rounded-full progress-bar-inner" style="width: 0%"></div>
                  </div>
                  <p id="progress-text" class="text-gray-500 text-sm w-full truncate h-5"></p>
                </div>
              </div>
            </div>`;
          videoDetailsContainer.innerHTML = htmlContent;
          videoDetailsContainer.classList.remove("hidden");
        }

        window.startDownload = function (url, type) {
          const downloadSection = document.getElementById("download-section");
          const progressSection = document.getElementById("progress-section");
          const progressBar = document.getElementById("progress-bar");
          const progressText = document.getElementById("progress-text");

          downloadSection.classList.add("hidden");
          progressSection.classList.remove("hidden");
          progressBar.style.width = "0%";
          progressText.textContent = "Starting download...";

          const eventSource = new EventSource(
            `/download?url=${encodeURIComponent(url)}&type=${type}`
          );
          eventSource.onmessage = function (event) {
            const data = JSON.parse(event.data);
            if (data.status === "progress") {
              progressBar.style.width = `${data.percent}%`;
              progressText.textContent = `Downloading... ${data.speed} - ${data.eta}`;
            } else if (data.status === "finished") {
              progressText.textContent =
                "Download complete! Your file will now be saved.";
              progressBar.style.width = "100%";
              eventSource.close();
              window.location.href = data.download_url;
            } else if (data.status === "error") {
              progressText.textContent = `Error: ${
                data.message || "An unknown error occurred."
              }`;
              eventSource.close();
            }
          };
          eventSource.onerror = function () {
            progressText.textContent =
              "Error: Connection to the server was lost.";
            eventSource.close();
            downloadSection.classList.remove("hidden");
            progressSection.classList.add("hidden");
          };
        };
      });
    </script>

    <noscript
      ><div class="max-w-3xl mx-auto p-4 text-center text-sm text-gray-600">
        Please enable JavaScript to use the downloader.
      </div></noscript
    >
  </body>
</html>
